using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Sistema_Desktop_P4
{
    public partial class login : Form
    {
        public login()
        {
            InitializeComponent();

            // Atribuições de eventos (garante que os nomes batem com o Designer)
            this.txtSenha.TextChanged += txtSenha_TextChanged;
            this.btnAcessar.Click += btnAcessar_Click;

            // Usabilidade: ENTER aciona o botão Acessar
            this.AcceptButton = this.btnAcessar;

            // Inicializa visibilidade dos labels conforme o conteúdo atual dos TextBoxes
            this.labelUser.Visible = !string.IsNullOrEmpty(this.txtUsuario.Text) ? false : true;
            this.labelSenha.Visible = !string.IsNullOrEmpty(this.txtSenha.Text) ? false : true;
        }

        private void Login_Load(object sender, EventArgs e)
        {
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            // Esconde labelUser assim que o usuário começar a digitar.
            labelUser.Visible = string.IsNullOrEmpty(txtUsuario.Text);
        }

        private void txtSenha_TextChanged(object sender, EventArgs e)
        {
            // Esconde labelSenha quando o usuario começar a digitar.
            labelSenha.Visible = string.IsNullOrEmpty(txtSenha.Text);
        }

        private void Login_Load_1(object sender, EventArgs e)
        {
        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
        }

        private void btnAcessar_Click(object sender, EventArgs e)
        {
            // 1. Coleta os dados digitados
            string usuario = txtUsuario.Text;
            string senha = txtSenha.Text;


            if (usuario == "adm" && senha == "1234")
            {
                MessageBox.Show("Login realizado com sucesso!", "Bem-vindo", MessageBoxButtons.OK, MessageBoxIcon.Information);

                // Ação pós-login: Esconder a tela de login e abrir a tela principal.
                this.Hide();

                // Substitua por seu formulário principal real
                Form principal = new Form();
                principal.Text = "Sistema Principal";
                principal.ShowDialog();

                this.Close();
            }
            else
            {
                MessageBox.Show("Usuário ou senha incorretos. Tente novamente.", "Erro de Login", MessageBoxButtons.OK, MessageBoxIcon.Error);
                txtSenha.Clear();
                txtUsuario.Focus();
            }
        }

    }
}
